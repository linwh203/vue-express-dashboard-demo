"use strict";(globalThis["webpackChunkweb"]=globalThis["webpackChunkweb"]||[]).push([[738],{7738:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});a(8964);var l=a(9835),s=a(1957),o=a(1569),n=a(499),i=a(9302),r=a(8339),u=a(9670);const d={class:"fullscreen loginPage flex flex-center"},p={class:"formBox q-pa-lg shadow-12 rounded-borders"},c=["onSubmit","onReset"],v=(0,l._)("div",{class:"text-h5 text-weight-bold text-white text-center"},"LOGIN",-1),m={class:"text-center"},f={__name:"LoginPage",setup(e){const t=(0,i.Z)(),a=(0,r.yj)(),f=(0,r.tv)(),y=(0,u.L)(),g=(0,n.iH)(""),b=(0,n.iH)(""),h=(0,n.iH)(!0),w=(0,n.iH)(null),x=(0,n.iH)(null),_=[e=>e&&e.length>0||"Please type username"],k=[e=>e&&e.length>0||"Please type password"],q=async()=>{if(w.value.validate(),x.value.validate(),w.value.hasError||x.value.hasError)return;const{data:e}=await o.api.post("/login",{username:g.value,password:b.value});if(console.log(e),0!=e.code)t.notify({type:"negative",position:"top",message:"Login failed! "+e.msg});else{y.setUser(e.data),t.notify({type:"positive",position:"top",message:"Login Success!"});const l=a.query.next?a.query.next:"/dashboard";setTimeout((()=>{f.replace(l)}),1e3)}},V=()=>{g.value="",b.value="",w.value.resetValidation(),x.value.resetValidation()};return(0,l.bv)((()=>{})),(e,t)=>{const a=(0,l.up)("q-input"),o=(0,l.up)("q-icon"),n=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",p,[(0,l._)("form",{onSubmit:(0,s.iM)(q,["prevent","stop"]),onReset:(0,s.iM)(V,["prevent","stop"]),class:"q-gutter-md"},[v,(0,l.Wm)(a,{dark:"",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),ref_key:"nameRef",ref:w,filled:"",type:"text",hint:"Username","lazy-rules":"",rules:_},null,8,["modelValue"]),(0,l.Wm)(a,{dark:"",ref_key:"passwordRef",ref:x,modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=e=>b.value=e),filled:"",type:h.value?"password":"text",hint:"Password","lazy-rules":"",rules:k},{append:(0,l.w5)((()=>[(0,l.Wm)(o,{name:h.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=e=>h.value=!h.value)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,l._)("div",m,[(0,l.Wm)(n,{label:"Login",type:"submit",color:"secondary"}),(0,l.Wm)(n,{label:"Reset",type:"reset",color:"white",flat:"",class:"q-ml-sm"})])],40,c)])])}}};var y=a(6611),g=a(2857),b=a(4455),h=a(9984),w=a.n(h);const x=f,_=x;w()(f,"components",{QInput:y.Z,QIcon:g.Z,QBtn:b.Z})}}]);